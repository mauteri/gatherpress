!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=30)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){!function(){e.exports=this.React}()},,function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(13);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(14),a=n(10);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}},function(e,t){!function(){e.exports=this.wp.i18n}()},,function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},,,function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t){!function(){e.exports=this.ReactDOM}()},,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(15),c=n.n(a),o=n(4),s=n.n(o),i=n(5),u=n.n(i),l=n(6),f=n.n(l),p=n(7),d=n.n(p),b=n(1),h=n.n(b),v=n(0),g=n(8),m=n(10),y=n.n(m);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}function _(e){this.setState({attendanceList:e})}var j=function(e){f()(n,e);var t=O(n);function n(e){var r;return s()(this,n),r=t.call(this,e),_=_.bind(y()(r)),r.state={attendanceList:GatherPress.attendees},r.pages=[{name:Object(g.__)("Attending","gatherpress"),slug:"attending",active:""},{name:Object(g.__)("Waitlist","gatherpress"),slug:"waitlist",active:""},{name:Object(g.__)("Not Attending","gatherpress"),slug:"not_attending",active:""}],r}return u()(n,[{key:"displayNavigation",value:function(){var e=this,t=[],n=GatherPress.current_user_status;n=""!==n?n:"attending";for(var r=0;r<this.pages.length;r++){var a=this.pages[r];a.active=n===a.slug?"active":"",t.push(Object(v.createElement)("a",{ref:function(t){return e.navItem=t},key:a.slug,className:"nav-item nav-link "+a.active,id:"nav-"+a.slug+"-tab","data-id":a.slug,"data-toggle":"tab",href:"#nav-"+a.slug,role:"tab","aria-controls":"nav-"+a.slug,"aria-selected":""===a.active?"false":"true"},a.name))}return t}},{key:"displayContent",value:function(){var e=[],t=GatherPress.current_user_status;t=""!==t?t:"attending";for(var n=0;n<this.pages.length;n++){var r=this.pages[n];r.active=t===r.slug?"active":"",e.push(Object(v.createElement)("div",{key:r.slug,className:"tab-pane fade show "+r.active,id:"nav-"+r.slug,role:"tabpanel","aria-labelledby":"nav-"+r.slug+"-tab"},Object(v.createElement)("div",{key:r.slug,className:"d-flex flex-row flex-wrap"},this.getAttendees(r.slug))))}return e}},{key:"getAttendees",value:function(e){if(void 0!==this.state.attendanceList[e]){for(var t=this.state.attendanceList[e].attendees,n=[],r=0;r<t.length;r++){var a=t[r];n.push(Object(v.createElement)("div",{key:a.id,className:"p-2"},Object(v.createElement)("a",{href:a.profile},Object(v.createElement)("img",{className:"img-thumbnail",alt:a.name,title:a.name,src:a.photo})),Object(v.createElement)("h5",{className:"mt-2 mb-0"},Object(v.createElement)("a",{href:a.profile},a.name)),Object(v.createElement)("h6",{className:"text-muted"},a.role)))}return n}}},{key:"render",value:function(){return Object(v.createElement)("div",{className:"mt-4"},Object(v.createElement)("nav",null,Object(v.createElement)("div",{className:"nav nav-tabs mb-4",id:"attendance-nav",role:"tablist"},this.displayNavigation())),Object(v.createElement)("div",{className:"tab-content p-3",id:"attendance-content"},this.displayContent()))}}]),n}(r.Component);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var w=function(e){f()(n,e);var t=x(n);function n(e){var r;return s()(this,n),(r=t.call(this,e)).state={inputValue:r.attendanceStatus(GatherPress.current_user_status)},r}return u()(n,[{key:"attendanceStatus",value:function(e){switch(e){case"attending":return Object(g.__)("Attending","gatherpress");case"not_attending":return Object(g.__)("Not Attending","gatherpress");case"waitlist":return Object(g.__)("On Waitlist","gatherpress")}return Object(g.__)("Attend","gatherpress")}},{key:"changeSelection",value:function(e){e.preventDefault();var t=e.target.getAttribute("data-value");this.updateStatus(t)}},{key:"updateStatus",value:function(e){var t=this,n={method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":GatherPress.nonce},body:JSON.stringify({status:e,post_id:GatherPress.post_id,_wpnonce:GatherPress.nonce})};fetch(GatherPress.event_rest_api+"attendance",n).then((function(e){return e.json()})).then((function(e){var n;e.success&&(t.setState({inputValue:t.attendanceStatus(e.status)}),_(e.attendees),n=e.status,document.getElementById("nav-"+n+"-tab").click())}))}},{key:"render",value:function(){var e=this,t=(GatherPress.has_event_past,"");return Object(v.createElement)("div",{className:"group inline-block relative float-right"},Object(v.createElement)("button",{type:"button",className:"bg-blue-500 hover:bg-blue-700 text-white text-2xl py-2 px-4 rounded inline-flex items-center "+t,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},Object(v.createElement)("span",{className:"mr-1"},this.state.inputValue),Object(v.createElement)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Object(v.createElement)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}))),Object(v.createElement)("ul",{className:"absolute right-0 z-10 hidden text-gray-700 pt-1 group-hover:block"},Object(v.createElement)("li",null,Object(v.createElement)("a",{className:"rounded-t bg-gray-200 hover:bg-gray-400 py-2 px-4 block whitespace-no-wrap",href:"#","data-value":"attending",onClick:function(t){return e.changeSelection(t)}},Object(g.__)("Yes, I would like to attend this event.","gatherpress"))),Object(v.createElement)("li",null,Object(v.createElement)("a",{className:"rounded-b bg-gray-200 hover:bg-gray-400 py-2 px-4 block whitespace-no-wrap",href:"#","data-value":"not_attending",onClick:function(t){return e.changeSelection(t)}},Object(g.__)("No, I cannot attend this event.","gatherpress")))))}}]),n}(r.Component),E=document.querySelector("#attendance_button_container"),S=document.querySelector("#attendance_container");c.a.render(Object(r.createElement)(w),E),c.a.render(Object(r.createElement)(j),S)}]);